{"ast":null,"code":"var _jsxFileName = \"E:\\\\RailBite-main (2)\\\\src\\\\context\\\\OrderContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrderContext = /*#__PURE__*/createContext();\nexport const useOrder = () => {\n  _s();\n  const context = useContext(OrderContext);\n  if (!context) {\n    throw new Error('useOrder must be used within an OrderProvider');\n  }\n  return context;\n};\n_s(useOrder, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const OrderProvider = ({\n  children\n}) => {\n  _s2();\n  const [orderHistory, setOrderHistory] = useState([]);\n  const [currentOrder, setCurrentOrder] = useState(null);\n  const [orderType, setOrderType] = useState('train');\n  const [bookingDetails, setBookingDetails] = useState(null);\n  useEffect(() => {\n    // Load order type\n    const storedOrderType = localStorage.getItem('railbiteOrderType');\n    if (storedOrderType) {\n      setOrderType(storedOrderType);\n    }\n\n    // Load booking details\n    const storedBooking = localStorage.getItem('railbiteBooking');\n    if (storedBooking) {\n      setBookingDetails(JSON.parse(storedBooking));\n    }\n\n    // Optional: load last order from localStorage for quick display\n    const lastOrder = localStorage.getItem('railbiteLastOrder');\n    if (lastOrder) {\n      setCurrentOrder(JSON.parse(lastOrder));\n    }\n  }, []);\n\n  // Called from OrderTrain / OrderStation\n  const saveOrderType = type => {\n    setOrderType(type);\n    localStorage.setItem('railbiteOrderType', type);\n  };\n  const saveBookingDetails = details => {\n    setBookingDetails(details);\n    localStorage.setItem('railbiteBooking', JSON.stringify(details));\n  };\n\n  /**\r\n   * addOrder will be called after a successful backend POST /api/orders.\r\n   * You pass the created order (from backend) into this, so the context\r\n   * can keep latest order & local history for UI convenience.\r\n   */\n  const addOrder = orderFromBackend => {\n    if (!orderFromBackend) return null;\n    const newOrder = {\n      ...orderFromBackend,\n      id: orderFromBackend.orderId || orderFromBackend.id,\n      // for compatibility\n      date: orderFromBackend.createdAt || new Date().toISOString()\n    };\n    const updatedHistory = [newOrder, ...orderHistory];\n    setOrderHistory(updatedHistory);\n    localStorage.setItem('railbiteOrderHistory', JSON.stringify(updatedHistory));\n    setCurrentOrder(newOrder);\n    localStorage.setItem('railbiteLastOrder', JSON.stringify(newOrder));\n    return newOrder;\n  };\n  const setOrdersFromBackend = ordersArray => {\n    // helper to set full history when you fetch from GET /api/orders\n    setOrderHistory(ordersArray || []);\n    localStorage.setItem('railbiteOrderHistory', JSON.stringify(ordersArray || []));\n  };\n  const getOrderById = orderId => {\n    return orderHistory.find(order => order.orderId === orderId || order.id === orderId);\n  };\n  const value = {\n    orderHistory,\n    currentOrder,\n    orderType,\n    bookingDetails,\n    saveOrderType,\n    saveBookingDetails,\n    addOrder,\n    // use after POST /api/orders\n    setOrdersFromBackend,\n    // use after GET /api/orders\n    getOrderById\n  };\n  return /*#__PURE__*/_jsxDEV(OrderContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 10\n  }, this);\n};\n_s2(OrderProvider, \"r5s4kN5o8O+eBlqLsEpqdkPy4kk=\");\n_c = OrderProvider;\nvar _c;\n$RefreshReg$(_c, \"OrderProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","jsxDEV","_jsxDEV","OrderContext","useOrder","_s","context","Error","OrderProvider","children","_s2","orderHistory","setOrderHistory","currentOrder","setCurrentOrder","orderType","setOrderType","bookingDetails","setBookingDetails","storedOrderType","localStorage","getItem","storedBooking","JSON","parse","lastOrder","saveOrderType","type","setItem","saveBookingDetails","details","stringify","addOrder","orderFromBackend","newOrder","id","orderId","date","createdAt","Date","toISOString","updatedHistory","setOrdersFromBackend","ordersArray","getOrderById","find","order","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/RailBite-main (2)/src/context/OrderContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\r\n\r\nconst OrderContext = createContext();\r\n\r\nexport const useOrder = () => {\r\n  const context = useContext(OrderContext);\r\n  if (!context) {\r\n    throw new Error('useOrder must be used within an OrderProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const OrderProvider = ({ children }) => {\r\n  const [orderHistory, setOrderHistory] = useState([]);\r\n  const [currentOrder, setCurrentOrder] = useState(null);\r\n  const [orderType, setOrderType] = useState('train');\r\n  const [bookingDetails, setBookingDetails] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Load order type\r\n    const storedOrderType = localStorage.getItem('railbiteOrderType');\r\n    if (storedOrderType) {\r\n      setOrderType(storedOrderType);\r\n    }\r\n\r\n    // Load booking details\r\n    const storedBooking = localStorage.getItem('railbiteBooking');\r\n    if (storedBooking) {\r\n      setBookingDetails(JSON.parse(storedBooking));\r\n    }\r\n\r\n    // Optional: load last order from localStorage for quick display\r\n    const lastOrder = localStorage.getItem('railbiteLastOrder');\r\n    if (lastOrder) {\r\n      setCurrentOrder(JSON.parse(lastOrder));\r\n    }\r\n  }, []);\r\n\r\n  // Called from OrderTrain / OrderStation\r\n  const saveOrderType = (type) => {\r\n    setOrderType(type);\r\n    localStorage.setItem('railbiteOrderType', type);\r\n  };\r\n\r\n  const saveBookingDetails = (details) => {\r\n    setBookingDetails(details);\r\n    localStorage.setItem('railbiteBooking', JSON.stringify(details));\r\n  };\r\n\r\n  /**\r\n   * addOrder will be called after a successful backend POST /api/orders.\r\n   * You pass the created order (from backend) into this, so the context\r\n   * can keep latest order & local history for UI convenience.\r\n   */\r\n  const addOrder = (orderFromBackend) => {\r\n    if (!orderFromBackend) return null;\r\n\r\n    const newOrder = {\r\n      ...orderFromBackend,\r\n      id: orderFromBackend.orderId || orderFromBackend.id, // for compatibility\r\n      date: orderFromBackend.createdAt || new Date().toISOString(),\r\n    };\r\n\r\n    const updatedHistory = [newOrder, ...orderHistory];\r\n    setOrderHistory(updatedHistory);\r\n    localStorage.setItem('railbiteOrderHistory', JSON.stringify(updatedHistory));\r\n\r\n    setCurrentOrder(newOrder);\r\n    localStorage.setItem('railbiteLastOrder', JSON.stringify(newOrder));\r\n\r\n    return newOrder;\r\n  };\r\n\r\n  const setOrdersFromBackend = (ordersArray) => {\r\n    // helper to set full history when you fetch from GET /api/orders\r\n    setOrderHistory(ordersArray || []);\r\n    localStorage.setItem('railbiteOrderHistory', JSON.stringify(ordersArray || []));\r\n  };\r\n\r\n  const getOrderById = (orderId) => {\r\n    return orderHistory.find((order) => order.orderId === orderId || order.id === orderId);\r\n  };\r\n\r\n  const value = {\r\n    orderHistory,\r\n    currentOrder,\r\n    orderType,\r\n    bookingDetails,\r\n    saveOrderType,\r\n    saveBookingDetails,\r\n    addOrder,              // use after POST /api/orders\r\n    setOrdersFromBackend,  // use after GET /api/orders\r\n    getOrderById,\r\n  };\r\n\r\n  return <OrderContext.Provider value={value}>{children}</OrderContext.Provider>;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}