{"ast":null,"code":"// src/services/api.js\nimport axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Base axios instance\nconst api = axios.create({\n  baseURL: API_URL\n});\n\n// Attach auth token automatically\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('railbiteToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// ---------- AUTH ----------\nexport const authAPI = {\n  register: data => api.post('/auth/register', data),\n  login: data => api.post('/auth/login', data),\n  getMe: () => api.get('/auth/me'),\n  updateProfile: data => api.put('/auth/profile', data),\n  forgotPassword: data => api.post('/auth/forgot-password', data),\n  resetPassword: data => api.post('/auth/reset-password', data),\n  logout: () => api.post('/auth/logout')\n};\n\n// ---------- MENU ----------\nexport const menuAPI = {\n  getAll: (params = {}) => api.get('/menu', {\n    params\n  }),\n  getById: id => api.get(`/menu/${id}`),\n  getCategories: () => api.get('/menu/categories/list'),\n  getByCategory: (category, params = {}) => api.get(`/menu/category/${category}`, {\n    params\n  }),\n  // Admin (needs user.role === 'admin')\n  create: data => api.post('/menu', data),\n  update: (id, data) => api.put(`/menu/${id}`, data),\n  remove: id => api.delete(`/menu/${id}`)\n};\n\n// ---------- ORDERS ----------\nexport const orderAPI = {\n  create: data => api.post('/orders', data),\n  listMy: (params = {}) => api.get('/orders', {\n    params\n  }),\n  getByOrderId: orderId => api.get(`/orders/${orderId}`),\n  cancel: orderId => api.put(`/orders/${orderId}/cancel`),\n  statsMe: () => api.get('/orders/stats/me'),\n  // Admin\n  adminUpdateStatus: (orderId, status) => api.put(`/orders/admin/${orderId}/status`, {\n    status\n  }),\n  adminStats: () => api.get('/orders/admin/stats'),\n  adminRecent: (limit = 5) => api.get('/orders/admin/recent', {\n    params: {\n      limit\n    }\n  }),\n  adminList: (params = {}) => api.get('/orders/admin', {\n    params\n  })\n};\n\n// ---------- NOTIFICATIONS ----------\nexport const notificationsAPI = {\n  // User endpoints\n  listMy: filter => api.get('/notifications', {\n    params: filter ? {\n      filter\n    } : {}\n  }),\n  unreadCount: () => api.get('/notifications/unread/count'),\n  markAllRead: () => api.put('/notifications/read-all'),\n  markOneRead: id => api.put(`/notifications/${id}/read`),\n  deleteOne: id => api.delete(`/notifications/${id}`),\n  clearAll: () => api.delete('/notifications/clear-all'),\n  // Admin endpoints\n  adminListAll: () => api.get('/notifications/admin/all'),\n  adminMarkRead: id => api.put(`/notifications/admin/${id}/read`),\n  adminDelete: id => api.delete(`/notifications/admin/${id}`),\n  adminCreate: data => api.post('/notifications/admin', data)\n};\nexport default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","authAPI","register","data","post","login","getMe","get","updateProfile","put","forgotPassword","resetPassword","logout","menuAPI","getAll","params","getById","id","getCategories","getByCategory","category","update","remove","delete","orderAPI","listMy","getByOrderId","orderId","cancel","statsMe","adminUpdateStatus","status","adminStats","adminRecent","limit","adminList","notificationsAPI","filter","unreadCount","markAllRead","markOneRead","deleteOne","clearAll","adminListAll","adminMarkRead","adminDelete","adminCreate"],"sources":["D:/RailBite-main/railbite-frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\nimport axios from 'axios';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n\n// Base axios instance\nconst api = axios.create({\n  baseURL: API_URL,\n});\n\n// Attach auth token automatically\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('railbiteToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// ---------- AUTH ----------\nexport const authAPI = {\n  register: (data) => api.post('/auth/register', data),\n  login: (data) => api.post('/auth/login', data),\n  getMe: () => api.get('/auth/me'),\n  updateProfile: (data) => api.put('/auth/profile', data),\n  forgotPassword: (data) => api.post('/auth/forgot-password', data),\n  resetPassword: (data) => api.post('/auth/reset-password', data),\n  logout: () => api.post('/auth/logout'),\n};\n\n// ---------- MENU ----------\nexport const menuAPI = {\n  getAll: (params = {}) => api.get('/menu', { params }),\n  getById: (id) => api.get(`/menu/${id}`),\n  getCategories: () => api.get('/menu/categories/list'),\n  getByCategory: (category, params = {}) =>\n    api.get(`/menu/category/${category}`, { params }),\n\n  // Admin (needs user.role === 'admin')\n  create: (data) => api.post('/menu', data),\n  update: (id, data) => api.put(`/menu/${id}`, data),\n  remove: (id) => api.delete(`/menu/${id}`),\n};\n\n// ---------- ORDERS ----------\nexport const orderAPI = {\n  create: (data) => api.post('/orders', data),\n  listMy: (params = {}) => api.get('/orders', { params }),\n  getByOrderId: (orderId) => api.get(`/orders/${orderId}`),\n  cancel: (orderId) => api.put(`/orders/${orderId}/cancel`),\n  statsMe: () => api.get('/orders/stats/me'),\n\n  // Admin\n  adminUpdateStatus: (orderId, status) =>\n    api.put(`/orders/admin/${orderId}/status`, { status }),\n  adminStats: () => api.get('/orders/admin/stats'),\n  adminRecent: (limit = 5) =>\n    api.get('/orders/admin/recent', { params: { limit } }),\n  adminList: (params = {}) => api.get('/orders/admin', { params }),\n};\n\n// ---------- NOTIFICATIONS ----------\nexport const notificationsAPI = {\n  // User endpoints\n  listMy: (filter) =>\n    api.get('/notifications', {\n      params: filter ? { filter } : {},\n    }),\n  unreadCount: () => api.get('/notifications/unread/count'),\n  markAllRead: () => api.put('/notifications/read-all'),\n  markOneRead: (id) => api.put(`/notifications/${id}/read`),\n  deleteOne: (id) => api.delete(`/notifications/${id}`),\n  clearAll: () => api.delete('/notifications/clear-all'),\n\n  // Admin endpoints\n  adminListAll: () => api.get('/notifications/admin/all'),\n  adminMarkRead: (id) => api.put(`/notifications/admin/${id}/read`),\n  adminDelete: (id) => api.delete(`/notifications/admin/${id}`),\n  adminCreate: (data) => api.post('/notifications/admin', data),\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}